var Infertek;(function(e){var t="infertek.busyindicator.overlay",n="infertek.busyindicator.overlayevent",r="visible",i='<div class="busy_indicator"><div class="busy_indicator_image"></div></div>',s=function(e){var t=e,n=0;do{var r=t.css("z-index");if(r=="auto")continue;r>n&&(n=r)}while(!(t=t.parent()).is(document.body));return n},o=function(){return jQuery(i).appendTo(document.body)},u=function(e){if(e&&e!=""&&e.endsWith("px")){var t=e.substr(0,e.length-2);return isNaN(t)?0:parseInt(t)}return 0},a=function(e,t){var n=t.css("visibility")=="visible"&&t.css("display")!="none",i=t.offset(),o=t.height(),a=t.width(),f=s(t),l=window.scrollX,c=window.scrollY,h=window.innerHeight,p=window.innerWidth,d=u(t.css("padding-top"))+u(t.css("margin-top")),v=u(t.css("padding-bottom"))+u(t.css("margin-bottom")),m=u(t.css("padding-left"))+u(t.css("margin-left")),g=u(t.css("padding-right"))+u(t.css("margin-right"));o+=d+v,a+=m+g;var y=i.left>=p+l||i.left+a<=l,b=i.top>=h+c||i.top+o<=c;if(y||b||!n)e.removeClass(r);else{var w=i.left<l?l:i.left,E=i.top<c?c:i.top,S=0,x=0;i.left+a>l+p?S=a-(w-i.left)-(i.left+a-(l+p)):S=a-(w-i.left),i.top+o>c+h?x=o-(E-i.top)-(i.top+o-(c+h)):x=o-(E-i.top),e.css("top",E).css("left",w).css("width",S+"px").css("height",x+"px"),e.addClass(r)}e.css("z-index",f+1)},f=function(){};f.hide=function(e){var r=e.data(t);if(!r)return;r.remove();var i=e.data(n);$(window).off("scroll",i).off("resize",i),e.data(t,null),e.data(n,null)},f.show=function(e){var r=e.data(t);r||e.data(t,r=o());var i=function(){a(r,e)};e.data(n,i),$(window).on("scroll",i).on("resize",i),i()},e.BusyIndicator=f})(Infertek||(Infertek={})),ko.bindingHandlers.infertekBusyIndicator={init:function(e,t,n,r,i){t()()&&Infertek.BusyIndicator.show($(e))},update:function(e,t,n,r,i){t()()?Infertek.BusyIndicator.show($(e)):Infertek.BusyIndicator.hide($(e))}};