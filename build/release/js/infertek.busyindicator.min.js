var Infertek;(function(e){var t="infertek.busyindicator.overlay",n="infertek.busyindicator.overlayevent",r="visible",i='<div class="busy_indicator"><div class="busy_indicator_image"></div></div>',s=function(e){var t=e,n=0;do{var r=t.css("z-index");if(r=="auto")continue;r>n&&(n=r)}while(!(t=t.parent()).is(document.body));return n},o=function(){return jQuery(i).appendTo(document.body)},u=function(e,t){var n=t.css("visibility")=="visible"&&t.css("display")!="none",i=t.offset(),o=t.height(),u=t.width(),a=s(t),f=window.scrollX,l=window.scrollY,c=window.innerHeight,h=window.innerWidth,p=i.left>=h+f||i.left+u<=f,d=i.top>=c+l||i.top+o<=l;if(p||d||!n)e.removeClass(r);else{var v=i.left<f?f:i.left,m=i.top<l?l:i.top,g=0,y=0;i.left+u>f+h?g=u-(v-i.left)-(i.left+u-(f+h)):g=u-(v-i.left),i.top+o>l+c?y=o-(m-i.top)-(i.top+o-(l+c)):y=o-(m-i.top),e.css("top",m).css("left",v).css("width",g+"px").css("height",y+"px"),e.addClass(r)}e.css("z-index",a+1)},a=function(){};a.hide=function(e){var r=e.data(t);if(!r)return;r.remove();var i=e.data(n);$(window).off("scroll",i).off("resize",i),e.data(t,null),e.data(n,null)},a.show=function(e){var r=e.data(t);r||e.data(t,r=o());var i=function(){u(r,e)};e.data(n,i),$(window).on("scroll",i).on("resize",i),i()},e.BusyIndicator=a})(Infertek||(Infertek={})),ko.bindingHandlers.infertekBusyIndicator={init:function(e,t,n,r,i){t()()&&Infertek.BusyIndicator.show($(e))},update:function(e,t,n,r,i){t()()?Infertek.BusyIndicator.show($(e)):Infertek.BusyIndicator.hide($(e))}};